{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}
{% block header_title %} 
  <h1 class="dashboard-title-header">Healthcare Financial Dashboard</h1>
{% endblock %}

{% block additional_css %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-content">
    <div class="dashboard-header">
        <h2>Welcome Back, {{ username }}!</h2>
        <p>Here’s your quick overview of the hospital's financial health.</p>
    </div>

    <div class="dashboard-statistics">
        <div class="stat-card">
            <h3>Total Patients</h3>
            <p>2,300</p>
        </div>
        <div class="stat-card">
            <h3>Pending Claims</h3>
            <p>₱85,000</p>
        </div>
        <div class="stat-card">
            <h3>Active Cases</h3>
            <p>152</p>
        </div>
        <div class="stat-card">
            <h3>Hospital Revenue</h3>
            <p>₱3,000,000</p>
        </div>
    </div>

    <div class="dashboard-charts">
        <div class="chart-container">
            <h3>Monthly Revenue by Department</h3>
            <canvas id="revenueChart"></canvas>
        </div>
        <div class="chart-container">
            <h3>Patient Admission Trends</h3>
            <canvas id="admissionChart"></canvas>
        </div>
    </div>

    <div class="recent-activities">
        <h3>Recent Activities</h3>
        <ul>
            <li>New patient billing record added - 1 hour ago</li>
            <li>Insurance claim submitted for John Doe - 3 hours ago</li>
            <li>Revenue report updated for June - 1 day ago</li>
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script>
    // Chart.js code
    const ctxRevenue = document.getElementById('revenueChart').getContext('2d');
    const revenueChart = new Chart(ctxRevenue, {
        type: 'bar',
        data: {
            labels: ['Emergency', 'Inpatient', 'Outpatient', 'Diagnostics'],
            datasets: [{
                label: 'Revenue by Department (₱)',
                data: [50000, 800000, 200000, 300000],
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });

    const ctxAdmission = document.getElementById('admissionChart').getContext('2d');
    const admissionChart = new Chart(ctxAdmission, {
        type: 'line',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June'],
            datasets: [{
                label: 'Patient Admissions',
                data: [120, 150, 130, 170, 190, 220],
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });
</script>
{% endblock %}
